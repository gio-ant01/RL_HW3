#!/bin/sh
#
# @name Gazebo ciccio_drone (Hexacopter X)
#
# @type Hexarotor x
#

. ${R}etc/init.d/rc.mc_defaults

PX4_SIMULATOR=${PX4_SIMULATOR:=gz}
PX4_GZ_WORLD=${PX4_GZ_WORLD:=default}
PX4_SIM_MODEL=${PX4_SIM_MODEL:=ciccio_drone}

param set-default SIM_GZ_EN 1
param set-default MAV_TYPE 13

# ============================================
# TIPO AIRFRAME: MULTICOPTER (NON VTOL!)
# ============================================
param set-default CA_AIRFRAME 0
param set-default CA_ROTOR_COUNT 6

# ============================================
# CONFIGURAZIONE HEXACOPTER X STANDARD
# Motori disposti a 0°, 60°, 120°, 180°, 240°, 300°
# Raggio normalizzato = 1.0 (PX4 scala internamente)
# ============================================


# Motore 0 - Fronte (0°) - CCW
param set-default CA_ROTOR0_PX 0.28       
param set-default CA_ROTOR0_PY 0.0        
param set-default CA_ROTOR0_KM 0.05      # CCW → negativo

# Motore 1 - Fronte-Destra (60°) - CW
param set-default CA_ROTOR1_PX 0.14       
param set-default CA_ROTOR1_PY -0.242     
param set-default CA_ROTOR1_KM -0.05       # CW → positivo
# Motore 2 - Retro-Destra (120°) - CCW
param set-default CA_ROTOR2_PX -0.14       
param set-default CA_ROTOR2_PY -0.242   
param set-default CA_ROTOR2_KM 0.05      # CCW → negativo

# Motore 3 - Retro (180°) - CW
param set-default CA_ROTOR3_PX -0.28      
param set-default CA_ROTOR3_PY 0.0        
param set-default CA_ROTOR3_KM -0.05       # CW → positivo

# Motore 4 - Retro-Sinistra (240°) - CCW
param set-default CA_ROTOR4_PX -0.14       
param set-default CA_ROTOR4_PY 0.242  
param set-default CA_ROTOR4_KM 0.05      # CCW → negativo

# Motore 5 - Fronte-Sinistra (300°) - CW
param set-default CA_ROTOR5_PX 0.14        
param set-default CA_ROTOR5_PY 0.242  
param set-default CA_ROTOR5_KM -0.05       # CW → positivo

# ============================================
# MAPPATURA ESC
# ============================================
param set-default SIM_GZ_EC_FUNC1 101
param set-default SIM_GZ_EC_FUNC2 102
param set-default SIM_GZ_EC_FUNC3 103
param set-default SIM_GZ_EC_FUNC4 104
param set-default SIM_GZ_EC_FUNC5 105
param set-default SIM_GZ_EC_FUNC6 106

param set-default SIM_GZ_EC_MIN1 150
param set-default SIM_GZ_EC_MIN2 150
param set-default SIM_GZ_EC_MIN3 150
param set-default SIM_GZ_EC_MIN4 150
param set-default SIM_GZ_EC_MIN5 150
param set-default SIM_GZ_EC_MIN6 150

param set-default SIM_GZ_EC_MAX1 1000
param set-default SIM_GZ_EC_MAX2 1000
param set-default SIM_GZ_EC_MAX3 1000
param set-default SIM_GZ_EC_MAX4 1000
param set-default SIM_GZ_EC_MAX5 1000
param set-default SIM_GZ_EC_MAX6 1000

# ============================================
# PARAMETRI VOLO
# ============================================
param set-default MPC_THR_HOVER 0.7



# Failsafe
param set-default NAV_DLL_ACT 2